# Go-OPS

[![License](https://img.shields.io/badge/License-Apache%202.0-blue.svg)](https://opensource.org/licenses/Apache-2.0)

Go-ops是面向云平台系统, 基于 PaaS 技术支持客户实现 DevOps 解决方案的平台。提供完善作业管理、配置管理、定期调度、健康巡检等模块，助力运维人员快速、低成本、自动化的管理配置运维系统。


Go-ops是由很多节点组成的,是一个完全去中心化的,底层实现了一个比较low的P2P网络,这个网络由手工自由组网,因为我想着这个网络可控制。



## 节点管理
 * [x] 连接节点 (指定节点主动连接到另一个节点)
 * [x] 断开节点 （指定节点主动断开另一个节点）
 * [x] 节点列表 (获取指定节点与之相连接的节点)
 * [ ] 节点自我升级
 * [ ] 节点任务管理
 * [ ] 查看节点文件夹
 * [ ] 在节点上创建文件夹
 * [ ] 删除文件
 * [ ] 移动文件
 * [ ] 上传文件
 * [ ] 下载文件
  

## 节点状态 
 * [x] cpu
 * [x] 内存
 * [x] 硬盘使用情况
 * [x] 网卡信息


## 脚本下发
 
 * [x] 命令下发 (执行简单的命令)
 * [x] 脚本内容下发 (执行复杂脚本)
 * [x] 执行本地脚本 (脚本存放在本地) 
 * [x] 执行URL脚本 (从URL下载脚本到本地执行)
 * [x] 中断脚本执行 (对于正在运行中的脚本，可以中断)
 * [ ] 插件任务 (可以通过插件方式执行任务)

## 任务
 * [x] 创建异步脚本任务
 * [x] 创建同步脚本任务
 * [x] 获取脚本任务信息
 * [x] 创建文件分发任务
 * [x] 获取文件分发信息信息
 * [ ] 创建巡检任务
 * [ ] 获取巡检任务信息 
 * [ ] 巡检告警 
 * [ ] 创建定时任务
 * [ ] 取消定时任务
 * [ ] 获取定时任务信息
 * [x] 创建预设任务
 * [x] 更新预设任务
 * [x] 删除预设任务
 * [x] 查询预设任务 
  

## 文件

 * [x] 通过给定文件URL下载地址分发到指定节点（文件下载）
 * [ ] 通过文件流方式推送文件到指定节点（文件下载）
 * [ ] 文件上传 (上传文件到文件服务器)
 * [ ] 文件删除 (从文件服务器删除文件)
 * [ ] 获取文件列表信息 (获取文件服务器的列表信息)
  


## Agent管理

 * [x] agent安装
 * [x] agent卸载
 * [x] agent启动 
 * [x] agent停止


## 脚本库管理
 * [ ] 创建一个脚本
 * [ ] 更新脚本
 * [ ] 查询脚本
 * [ ] clone脚本

## 巡检
 * [ ] 创建一个巡检项
 * [ ] 更新巡检项
 * [ ] 删除巡检项
 * [ ] 创建巡检模板
 * [ ] 更新巡检模板
 * [ ] 删除巡检模板


## 调用方管理
 * [ ] 新增调用方
 * [ ] 更新调用方
 * [ ] 删除调用方

## 用户管理
 * [ ] 新增用户
 * [ ] 更新用户
 * [ ] 删除用户
 * [ ] 用户角色

## 权限控制
 * [ ] 调用方权限控制
 * [ ] 用户权限控制



### Dev-build

本项目分为api-server 端和 agent端, agent 端代码都在agent目录下。

- go version >= 1.16
- 第一次build 优先 go mod tidy
- build agent: go build cmd/agent/main.go -o bin/agent
- build api-server: build cmd/server/main.go -o bin/go-ops-server
- 运行api-server: 先创建数据库,然后导入scripts/ops.sql 
- 修改config.yaml 里面的link字符串为你的数据库连接串
- go run cmd/server/main.go
- http://ip:port/swagger  查看swagger文档



## 其它

该项目基于GoFrame 2.0 开发, 目前项目还在处于开发阶段, 未经过测试, 请勿用于生产。

